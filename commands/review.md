---
description: '코드 리뷰 및 개선사항 제안'
allowed-tools: ['Read', 'Grep', 'Edit', 'Bash']
---

브랜치명, PR 번호, 또는 파일 경로를 기반으로 코드 리뷰를 진행합니다.

## 사용법:

- `/review branch-name` - 특정 브랜치와 main 브랜치 간 차이점 리뷰
- `/review PR번호` - 특정 PR의 변경사항 리뷰 (gh CLI 필요)
- `/review PR번호 --comment` - PR 리뷰 후 자동으로 댓글 등록
- `/review file/path.ts` - 특정 파일 리뷰
- `/review` - 현재 브랜치의 변경사항 리뷰

## 리뷰 관점:

### 일반 코드 리뷰

1. **코드 품질**: 가독성, 유지보수성, 성능
2. **보안**: 잠재적 보안 취약점 검토
3. **TypeScript/NestJS 모범 사례**: 프레임워크 관련 권장사항
4. **테스트**: 테스트 커버리지 및 테스트 가능성
5. **아키텍처**: 모듈 구조 및 의존성 관리
6. **데이터베이스**: Prisma 스키마 및 마이그레이션 검토

### Claude CLI 답변 검증 (추가)

7. **CLAUDE.md 준수**: 한국어 사용, 개발 명령어 정확성, 아키텍처 패턴 준수
8. **프로젝트 컨텍스트**: 모듈 구조, 외부 서비스 연동, DB 스키마 이해도
9. **코드 제안 품질**: 실행 가능성, 코드베이스 일관성, 보안 고려사항

## 자동 분석 프로세스:

먼저 인자를 분석하여 리뷰 대상을 결정합니다:

- 숫자인 경우: PR 번호로 간주하여 `gh pr view`와 `gh pr diff` 사용
- 숫자 + `--comment` 플래그: PR 리뷰 후 `gh pr comment` 명령으로 댓글 자동 등록
- 브랜치명인 경우: `git diff main..브랜치명` 사용
- 파일 경로인 경우: 해당 파일을 직접 읽어서 분석
- 인자가 없는 경우: `git diff main..HEAD` 사용

변경된 파일들을 읽어서 상세한 코드 리뷰를 제공하고, `--comment` 플래그가 있으면 GitHub PR에 댓글로 등록합니다.

## PR 댓글 기능:

`--comment` 플래그를 사용하면 리뷰 완료 후 자동으로 다음을 실행:

```bash
gh pr comment {PR번호} --body "리뷰내용"
```

댓글은 다음 형식으로 작성됩니다:

- 📋 변경사항 개요
- ✅ 긍정적인 부분
- 🔍 코드 품질 분석
- 🚨 잠재적 이슈 및 권장사항
- 🎯 최종 결론 (승인/수정요청)

---

$ARGUMENTS
